{% extends 'employee/employee_base.html' %}
{% load static %}

{% block content %}
<div class="p-6 bg-gray-50 min-h-screen">

  <!-- Toast message -->
  {% if messages %}
  <div class="fixed top-4 right-4 z-50">
    {% for message in messages %}
      <div class="bg-green-100 border border-green-400 text-green-800 px-4 py-2 rounded-md mb-2 shadow transition-all duration-500">
        {{ message }}
      </div>
    {% endfor %}
  </div>
  {% endif %}

  <!-- TiÃªu Ä‘á» -->
  <div class="flex items-center justify-between mb-6">
    <h2 class="text-2xl font-semibold text-gray-800 flex items-center gap-2">
      ğŸ§¾ Danh sÃ¡ch nhÃ  cung cáº¥p
    </h2>
    <a href="{% url 'supplier_add' %}" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition">
      â• ThÃªm nhÃ  cung cáº¥p
    </a>
  </div>

  <!-- Náº¿u cÃ³ dá»¯ liá»‡u -->
  {% if suppliers %}
  <div class="overflow-x-auto bg-white rounded-lg shadow">
    <table class="min-w-full border border-gray-200">
      <thead class="bg-gray-100 text-gray-700 uppercase text-sm">
        <tr>
          <th class="px-6 py-3 text-left">ID</th>
          <th class="px-6 py-3 text-left">TÃªn nhÃ  cung cáº¥p</th>
          <th class="px-6 py-3 text-left">Email</th>
          <th class="px-6 py-3 text-left">Sá»‘ Ä‘iá»‡n thoáº¡i</th>
          <th class="px-6 py-3 text-left">Äá»‹a chá»‰</th>
          <th class="px-6 py-3 text-center">Thao tÃ¡c</th>
        </tr>
      </thead>
      <tbody class="divide-y divide-gray-200">
        {% for supplier in suppliers %}
        <tr class="hover:bg-gray-50 transition">
          <td class="px-6 py-3">NCC{{ forloop.counter|stringformat:"02d" }}</td>
          <td class="px-6 py-3 font-medium text-gray-800">{{ supplier.sup_name }}</td>
          <td class="px-6 py-3">{{ supplier.email }}</td>
          <td class="px-6 py-3">{{ supplier.phone }}</td>
          <td class="px-6 py-3">{{ supplier.address }}</td>

          <!-- NÃºt sá»­a & xÃ³a Ä‘áº¹p -->
          <td class="px-6 py-3 text-center">
            <div class="flex items-center justify-center gap-3">

              <a href="{% url 'supplier_edit' supplier.id %}"
                class="flex items-center gap-1 px-3 py-1 bg-green-100 text-green-700 border border-green-300
                       rounded-lg hover:bg-green-200 transition text-sm font-medium shadow-sm">
                âœï¸ <span>Sá»­a</span>
              </a>

              <a href="{% url 'supplier_delete' supplier.id %}"
                onclick="return confirm('Báº¡n cÃ³ cháº¯c muá»‘n xÃ³a nhÃ  cung cáº¥p nÃ y khÃ´ng?')"
                class="flex items-center gap-1 px-3 py-1 bg-red-100 text-red-700 border border-red-300
                       rounded-lg hover:bg-red-200 transition text-sm font-medium shadow-sm">
                ğŸ—‘ï¸ <span>XÃ³a</span>
              </a>

            </div>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

  <!-- PhÃ¢n trang -->
  <div class="mt-4 flex justify-center items-center space-x-2">
    {% if suppliers.has_previous %}
      <a href="?page={{ suppliers.previous_page_number }}" class="px-3 py-1 border rounded hover:bg-gray-100">â†</a>
    {% endif %}
    <span class="px-3 py-1 text-gray-700">Trang {{ suppliers.number }} / {{ suppliers.paginator.num_pages }}</span>
    {% if suppliers.has_next %}
      <a href="?page={{ suppliers.next_page_number }}" class="px-3 py-1 border rounded hover:bg-gray-100">â†’</a>
    {% endif %}
  </div>

  {% else %}
  <!-- Khi khÃ´ng cÃ³ dá»¯ liá»‡u -->
  <div class="bg-white p-12 rounded-xl shadow text-center border border-gray-200 flex flex-col items-center justify-center animate-fade-in">
    <div class="mb-5">
      <svg xmlns="http://www.w3.org/2000/svg" class="w-24 h-24 text-blue-400 mx-auto" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
        <path stroke-linecap="round" stroke-linejoin="round" d="M3 7.5L12 3l9 4.5M3 7.5v9l9 4.5m9-13.5v9l-9 4.5M3 16.5l9-4.5m9 4.5l-9-4.5" />
      </svg>
    </div>
    <p class="text-xl font-semibold text-gray-700">Cá»­a hÃ ng cá»§a báº¡n chÆ°a cÃ³ nhÃ  cung cáº¥p</p>
    <p class="text-gray-500 mt-2 mb-6 text-sm">Táº¡o má»›i nhÃ  cung cáº¥p Ä‘á»ƒ quáº£n lÃ½ vÃ  nháº­p hÃ ng tá»« há».</p>
    <a href="{% url 'supplier_add' %}" class="px-5 py-2.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition font-medium shadow-sm">
      â• ThÃªm nhÃ  cung cáº¥p
    </a>
  </div>
  {% endif %}
</div>

<!-- áº¨n thÃ´ng bÃ¡o sau 3s -->
<script>
  setTimeout(() => {
    document.querySelectorAll('.fixed.top-4.right-4 div').forEach(el => {
      el.style.opacity = '0';
      setTimeout(() => el.remove(), 500);
    });
  }, 3000);
</script>

<style>
  @keyframes fade-in {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
  }
  .animate-fade-in {
    animation: fade-in 0.6s ease-out;
  }
</style>

{% endblock %}