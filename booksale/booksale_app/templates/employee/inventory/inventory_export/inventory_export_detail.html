{% extends "employee/employee_base.html" %}
{% load humanize %}
{% block content %}

<style>
    /* M·ªü r·ªông container */
.container {
    max-width: 1600px; /* TƒÉng chi·ªÅu r·ªông t·ªëi ƒëa c·ªßa container */
    margin: 0 auto; /* CƒÉn gi·ªØa container */
    padding: 40px; /* TƒÉng padding cho container */
}

/* Header */
.header_export {
    background-color: #f9fafb;
    padding: 20px;
    border-radius: 12px;
    margin-bottom: 15px;
}

.header_export h2 {
    font-size: 2rem; /* TƒÉng k√≠ch th∆∞·ªõc ph√¥ng ch·ªØ cho ti√™u ƒë·ªÅ */
    font-weight: 600;
    color: #3b82f6;
}

/* C√°c ph·∫ßn t·ª≠ table */
.table-container {
    background-color: #ffffff;
    border-radius: 12px;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    border: 1px solid #d1d5db;
    padding: 30px;
}

/* B·∫£ng */
.table {
    width: 100%;
    margin-top: 1rem;
    border: 1px solid #d1d5db;
    border-radius: 8px;
    overflow: hidden;
    background-color: #fff;
    font-size: 1rem; /* TƒÉng k√≠ch th∆∞·ªõc ph√¥ng ch·ªØ c·ªßa b·∫£ng */
}

.table th, .table td {
    padding: 1rem; /* TƒÉng padding c·ªßa c√°c √¥ */
    text-align: center;
}

.table th {
    background-color: #f9fafb;
    font-weight: bold;
    color: #1f2937;
}

.table td {
    border-top: 1px solid #d1d5db;
}

/* C√°c √¥ nh·∫≠p li·ªáu v√† n√∫t */
input[type="text"], select, textarea {
    width: 100%; /* ƒê·∫£m b·∫£o c√°c √¥ chi·∫øm to√†n b·ªô chi·ªÅu r·ªông */
    padding: 15px; /* TƒÉng padding */
    font-size: 1.2rem; /* TƒÉng k√≠ch th∆∞·ªõc ph√¥ng ch·ªØ */
    border-radius: 8px;
    border: 1px solid #d1d5db;
    margin-bottom: 20px;
}

button, .bg-blue-600 {
    padding: 18px 30px; /* TƒÉng k√≠ch th∆∞·ªõc n√∫t */
    font-size: 1.3rem; /* TƒÉng k√≠ch th∆∞·ªõc ph√¥ng ch·ªØ n√∫t */
    border-radius: 8px;
}

/* TƒÉng kho·∫£ng c√°ch gi·ªØa c√°c ph·∫ßn t·ª≠ */
.flex {
    display: flex;
    justify-content: space-between;
    gap: 20px;
}

/* C√°c ph·∫ßn t·ª≠ table */
.table td, .table th {
    min-width: 180px; /* TƒÉng chi·ªÅu r·ªông c·ªßa c√°c c·ªôt */
}
</style>

<div class="container px-6 py-4">
    <!-- HEADER -->
    <div class="header_export">
        <div class="flex justify-between items-center mb-6">
            <h2 class="text-xl font-semibold text-blue-700 flex items-center gap-2">
                <span class="text-2xl">üì§</span> Chi ti·∫øt phi·∫øu xu·∫•t kho
            </h2>

            <a
                href="{% url 'inventory_export_pdf' export.id %}"
                class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg shadow-lg transition"
            >
                Xu·∫•t PDF
            </a>
        </div>
    </div>

    <div class="table-container">
        <!-- MESSAGES -->
        {% if messages %}
        <div class="mb-4">
            {% for m in messages %}
            <div
                class="px-4 py-3 rounded-lg mb-2 {% if m.tags == 'success' %} bg-green-100 text-green-700 border border-green-300 {% elif m.tags == 'error' %} bg-red-100 text-red-700 border border-red-300 {% else %} bg-blue-100 text-blue-700 border border-blue-300 {% endif %}"
            >
                {{ m }}
            </div>
            {% endfor %}
        </div>
        {% endif %}

        <!-- DETAILS -->
        <div class="details-container">
            <!-- Details Section -->
            <div class="section">
                <div>
                    <p><strong>M√£ phi·∫øu:</strong> #{{ export.id }}</p>
                    <p><strong>ƒê∆°n h√†ng:</strong> #{{ export.order.id }}</p>
                    <p><strong>Ng√†y t·∫°o:</strong> {{ export.export_date|date:"d/m/Y H:i" }}</p>
                    <p><strong>Nh√¢n vi√™n:</strong> {{ export.employee.emp_name }}</p>
                </div>
                <!-- Customer Info Section -->
                <div>
                    <p><strong>Th√¥ng tin kh√°ch h√†ng:</strong></p>
                    <ul>
                        <li><strong>T√™n:</strong> {{ export.order.customer.cust_name }}</li>
                        <li><strong>ƒêi·ªán tho·∫°i:</strong> {{ export.order.customer.phone }}</li>
                        <li><strong>ƒê·ªãa ch·ªâ:</strong> {{ export.order.customer.address }}</li>
                    </ul>
                </div>
            </div>

            <!-- ORDER ITEMS -->
            <div class="overflow-x-auto mt-6">
                <table class="table">
                    <thead>
                        <tr class="bg-gray-100 text-gray-700 text-sm">
                            <th class="py-3 px-4 text-left">S·∫£n ph·∫©m</th>
                            <th class="py-3 px-4 text-center">S·ªë l∆∞·ª£ng xu·∫•t</th>
                            <th class="py-3 px-4 text-center">ƒê∆°n gi√°</th>
                            <th class="py-3 px-4 text-center">Th√†nh ti·ªÅn</th>
                        </tr>
                    </thead>
                    <tbody class="text-sm">
                        {% for item in items %}
                        <tr class="border-b hover:bg-gray-50 transition">
                            <td class="py-3 px-4">{{ item.product.product_name }}</td>
                            <td class="py-3 px-4 text-center">{{ item.quantity }}</td>
                            <td class="py-3 px-4 text-center">{{ item.unit_price|intcomma }} ƒë</td>
                            <td class="py-3 px-4 text-center">{{ item.total_price|intcomma }} ƒë</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>

            <!-- TOTAL -->
            <div class="flex justify-between mt-6">
                <p class="font-semibold">T·ªïng ti·ªÅn:</p>
                <p class="text-right font-semibold">{{ export.total_amount|intcomma }} ƒë</p>
            </div>
        </div>
    </div>
</div>

{% endblock %}